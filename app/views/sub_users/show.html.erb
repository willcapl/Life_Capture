
<div class="container">
  <%= link_to 'Dashboard', dashboard_path %>
  <h1><%= @sub_user.name.capitalize%>'s profile</h1>
  <div class="show-container">


    <!-- Button -->
      <div class="btn-charcol" data-controller="copy" data-target="copy.source" data-bs-toggle="modal" data-bs-target="#exampleModal">
        <h3>Record story</h3>
        <i class="fas fa-plus plus-icon"></i>
      </div>

    <div class="videos-container">
      <% if @questions.find { |question| question.video.attached? } %>
        <div class="video-card-container">
          <% questions_attached = @questions.select { |question| question.video.attached?} %>
          <% questions_attached.each do |attached_question| %>
            <div class="video-card">
              <div class="video-card-title">
                <h4> <%= attached_question.title %></h4>
              </div>
              <div class="video-card-box">
                <video src="https://res.cloudinary.com/dpqge0m1h/raw/upload/v1701279627/development/<%= attached_question.video.key %>.mp4" controls="controls" preload="none" class="video-card-video"></video>
              </div>
              <div>
              <%= link_to 'rerecord video', sub_user_question_path(@sub_user, attached_question) %>
              <%= link_to 'delete memory', question_path(attached_question), data: { turbo_method: :delete, turbo_confirm: 'Are you sure you want to delete the memory?'} %>
              </div>
            </div>
          <% end %>
      </div>

      <% else %>
        <h4>You have no stories recorded yet...</h4>
      <% end %>

    </div>

</div>

  <div class="btn-show-page">
    <%= link_to 'Edit', edit_sub_user_path(@sub_user) %>
  </div>
  <div class="btn-show-page">
    <%= link_to 'Delete', sub_user_path(@sub_user), data: {turbo_method: :delete, turbo_confirm: 'Are you sure you want to delete this subuser?'} %>
  </div>

  <!--Centered Modal < Shakzz :) -->
        <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true" data-controller="copy">
            <div class="modal-dialog modal-dialog-centered">
              <div class="modal-content">
                <div class="modal-header">
                  <h1 class="modal-title fs-5" id="exampleModalLabel">Select an Option</h1>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  <div class="input-group" data-controller="copy" data-copy-feedback-text-value="Copied!">
                    <input class="form-control" data-copy-target="input" type="text" value= https://www.life-capture.com readonly>
                    <div class="input-group-append">
                      <button id="copy-button" class="btn btn-outline-primary" data-action="click->copy#copy">Copy to Clipboard</button>
                    </div>
                  </div>
                  <%= link_to sub_user_questions_path(@sub_user) do %>
                    <button class="custom-button" data-action="click->copy#copy">
                      <i class="fas fa-plus"></i>
                      <span class="button-text">Create a memory on this device</span>
                    </button>
                  <% end %>
                </div>
                <div class="modal-footer">
                </div>
              </div>
            </div>
        </div>


  </div>

</div>
